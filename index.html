<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
    <!--<script src="./js/main.js" defer></script>-->
    <title>Document</title>
</head>
<body>
    <!--holaaa-->
    <header>
        <div class="header-main">
            <div class="header-busqueda">
                <nav class="buscar-producto">
                
                    <input  id="barraBusqueda" type="text" placeholder="¿Que estas buscando?">
                </nav>
                <div class="logo">
                    <img src="https://acdn-us.mitiendanube.com/stores/006/296/350/themes/common/logo-1444518768-1748714067-c86f57064af934abbc8cf8f22bf870571748714067-480-0.webp" alt="logo">
                </div>
                <div class="header-registro" >
                    <div class="registro">
                        <ion-icon name="person-outline"></ion-icon>
                        <div>
                            <h6>¡Hola! inicia seccion</h6>
                            <a href="#" class="crear-cuenta">
                                <p>O puedes registrarte</p>
                            </a>
                        </div>
                        
                    </div>
                    <div class="header-carrito">
                        <a href="#">
                            <ion-icon name="cart-outline"></ion-icon>
                            <div class="contenedor-carrito">
                                <div>
                                    <h2>Mi carrito</h2>
                                </div>
                                
                                <aside id="carrito"></aside>
                            </div>
                        </a>
                        
                    </div>
                </div>
                    
            </div>
        </div>
        <div class="header-two">
            <div class="header-nav">
                <nav class="navegacion">
                    <a href="#"><p>INICIO</p></a>
                </nav>
                <nav class="navegacion">
                    <a href="#"><p>PRODUCTOS</p></a>
                
                </nav>
                <nav class="navegacion">
                    <a href="#"><p>CONTACTO</p></a>
                </nav>
                <nav class="navegacion">
                    <a href="#"><p>COMO COMPRAR</p></a>
                    
                </nav>
                <nav class="navegacion">
                    <a href="#">
                        <p>POLITICAS</p>
                    </a></nav>
            </div>
        </div>
        
        
    </header>
    <main>
        <section id="contenedorProducto"></section>
    </main>
    <footer>
        <form action=""></form>
    </footer>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script>
          let contenedorProductos = document.getElementById("contenedorProducto");
        const url = "http://localhost:3000/productos"; // Guardamos en una variable la url de nuestro endpoint

        async function obtenerProductos() {
            try {
                let respuesta = await fetch(url); // Hacemos una peticion a nuestro nuevo endpoint en http://localhost:3000/products

                let data = await respuesta.json();

                console.log(data); // Nuestros productos estan disponibles dentro de payload { payload: Array(19) }

                let productos = data.payload; 

                mostrarProductos(productos);

            } catch(error) {
                console.error(error);
            }
        }
        function mostrarProductos(array) {
            console.table(array); // Recibimos correctamente en formato tabla los productos que nos manda la funcion obtenerProductos()

            let htmlProducto = "";

            array.forEach(producto => {
                htmlProducto += `
                    <div class="card-producto">
                        <img src="${producto.img_url}" alt="${producto.nombre_producto}">
                        <h5>${producto.nombre_producto}</h5>
                        <p>Id: ${producto.id}</p>
                        <p>$${producto.precio}</p>
                    </div>
                `;
            });

            contenedorProductos.innerHTML = htmlProducto;
        }

        function init() {
            obtenerProductos()
        }

        init();
    </script>
</body>
</html>